<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cart</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div th:insert="navbar :: navbar"></div>
<div class="container mt-4">

    <div class="row" th:each="cartItem : ${cartitems}">
        <div class="col-md-12 mb-3">
            <div class="card">
                <div class="card-body row">

                    <div class="col-md-3">
                        <img th:src="@{'/images/' + ${cartItem.product.imagePath}}"
                             class="img-fluid">
                    </div>

                    <div class="col-md-6">
                        <h5 th:text="${cartItem.product.name}"></h5>
                        <p th:text="${cartItem.product.description}"></p>
                        <p>Qty: <span th:text="${cartItem.quantity}"></span></p>
                    </div>

                    <div class="col-md-3 text-center">
                        <h5 th:text="'Rs. ' + ${cartItem.product.price}"></h5>

                        <!-- âœ… FIXED REMOVE BUTTON -->
                        <form th:action="@{/api/cart/remove}" method="post">
    <input type="hidden" name="itemId" th:value="${cartItem.id}">
    <input type="hidden" name="userId" th:value="${userId}">
    <button class="btn btn-danger btn-sm mt-2">
        Remove
    </button>
</form>


                    </div>

                </div>
            </div>
        </div>
    </div>

       <!-- Checkout - CENTERED -->
    <div class="text-center mt-4 w-100">
        <a href="/api/order/addaddress" class="btn btn-dark btn-lg px-5">
            Proceed to Checkout
        </a>
    </div>

</div>
<script>
  function updateDateTime() {
    const dateTimeEl = document.getElementById("dateTime");
    if (!dateTimeEl) return;

    const now = new Date();

    let hours = now.getHours();
    let minutes = now.getMinutes();
    let ampm = hours >= 12 ? "PM" : "AM";

    hours = hours % 12 || 12;
    minutes = minutes < 10 ? "0" + minutes : minutes;

    const day = now.getDate();
    const month = now.getMonth() + 1;
    const year = now.getFullYear();

    dateTimeEl.innerText =
      hours + ":" + minutes + " " + ampm + " " +
      day + "/" + month + "/" + year;
  }

  setInterval(updateDateTime, 1000);
  updateDateTime();
</script>

<div th:insert="footer :: Footer"></div>

</body>
</html>